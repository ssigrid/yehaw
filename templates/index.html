<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="{{url_for('static', filename='main.css')}}">
<title>Search Engine</title>
</head>
	<body>
		<div>
		<header>
			<img src="static/pensive_cowboy.png" style="width: 1em" id="rotate">
			<a href="/search">Search from 153 Cowboy Songs</a>
			<img src="static/pensive_cowboy.png" style="width: 1em" id="rotate">
		</header>
		<div class="dropdown">
			<button class="dropbtn">Links</button>
			<div class="dropdown-content">
				<a href="https://github.com/ssigrid/yehaw">Our github</a>
				<a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Read more about the songs</a>
				<a href="https://youtu.be/rvrZJ5C_Nwg?t=142">Gutenberg himself</a>
				<a href="https://www.youtube.com/watch?v=R8R-ge3bzsY">The Creators</a>
			</div>
		</div>
		</div>
		<table>
			<tr>
				<form>
					<td>
						<input type="text" id="query" name="query" autofocus>
						
						<select name="query_type">
							<option value="r_query">Relevance</option>
							<option value="b_query">Boolean</option>
						</select>
						
						<input type="submit" value="Search" alt="Search">
						
						<input type="checkbox" id="topicrank" name="topicrank">
						<label for="topicrank">Show Keywords</label>
					</td>
				</form>
			</tr>
			<tr>
				<td>
					<p>Welcome to Team Yehaw's search engine!</p>
					<p>If you pick relevance search, input your query in double quotes for exact matching
					or leave the quotes out if you want to search for matching word stems.
					Using an asterisk(*) in a (quote-less) search matches the asterisk to any character(s),
					for example 'do*' matches to do, down, and doctrines.</p>
					<p>For Boolean search, use the words "and", "or", and "not" to separate your search words.</p>
					<p>Clicking 'Show Keywords' lets you see the ten most important words of every result drawn on a beautiful plot :)</p>
				</td>
			</tr>
		</table>
		
		{% if matches %}
		<!--Reload the page with variable "query" in the URL-->
		<table class="matchestable">
			<!--Go through each item in the "matches" variable sent from search() function in the Flask app-->
			{% for item in matches %}
				{% if item.name is defined %}
					<tr>
						<td>{{ item["rank"] }}</td>
						<td class="articlename">{{ item["name"] }}</td>
						<td class="resultentry">
							{% if item.title is defined %}
								{{ item["title"] }}
							{% elif item.title is undefined %}
								<div class="entrybox">
									{% for entry in item.text %}
										{% if loop.first %}
											<div class="firstentry">{{ entry }}<span class="hovertoview"><br>... [hover to see the rest]</span></div>
										{% elif not loop.first %}
											<div class="hiddenentry">{{ entry }}</div>
										{% endif %}
									{% endfor %}
									{% if item["plotimg"] %}
										<div class="hiddenentry"><br><img src="./static/{{ item['plotimg'] }}" style="width: 100%"></div>
									{% endif %}
								</div>
							{% endif %}
						</td>
					</tr>
				{% elif item.name is undefined %}
					<tr>
						<td><img src="static/cowboy_crying.png" style="width: 3em; margin-right: 15px" id="rotate">{{ item }}</td>
					</tr>
				{% endif %}
			<!--End for loop-->
			{% endfor %}
		</table>
		{% endif %}

		<footer>
			<span>Background image by <a href="https://pixabay.com/users/devanath-1785462/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2389830">
				Devanath</a> from <a href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2389830">
					Pixabay</a>
				<br>Crying cowboy icon by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">
					Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a>
				<br>Songs from the book <i>Cowboy Songs and Other Frontier Ballads</i> from <a href="https://www.gutenberg.org/ebooks/21300">www.gutenberg.com</a>
			</span>
		</footer>
	</body>
</html>